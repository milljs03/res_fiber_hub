<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CFN Install Tracker</title>
    <link rel="stylesheet" href="style.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide-icons@0.309.0"></script>
</head>

<body>

    <div id="auth-screen" class="auth-screen">
        <div class="auth-box">
            <i data-lucide="list-checks" class="auth-logo"></i>
            <h1 class="auth-title">CFN Install Tracker</h1>
            <p class="auth-text">Please sign in with your @nptel.com account.</p>
            <button id="sign-in-btn" class="btn btn-primary btn-full-width">
                <svg class="btn-icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22.56 12.25c0-.78-.07-1.52-.19-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.04v2.84C3.86 21.03 7.66 23 12 23z"/>
                    <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.04C1.32 8.38 1 9.65 1 11.01s.32 2.63 2.04 3.94l3.8-2.86z"/>
                    <path d="M12 5.38c1.62 0 3.06.56 4.21 1.69l3.15-3.15C17.45 2.18 14.97 1 12 1 7.66 1 3.86 2.97 2.04 5.84l3.8 2.84C6.71 7.31 9.14 5.38 12 5.38z"/>
                </svg>
                Sign in with Google
            </button>
            <p id="auth-error"></p>
        </div>
    </div>

    <div id="app-screen" class="hidden">
        <header class="app-header">
            <div class="header-content">
                <div class="header-title">
                    <i data-lucide="list-checks"></i>
                    <h1>CFN Install Tracker</h1>
                </div>
                <div class="user-info">
                    <span id="user-email"></span>
                    <button id="sign-out-btn">Sign Out</button>
                </div>
            </div>
        </header>

        <div class="main-grid">

            <div class="card">
                <h2 class="card-title">Add New Customer</h2>
                <form id="add-customer-form" class="card-content">
                    <div class="form-group">
                        <label for="so-number" class="form-label">Service Order #</label>
                        <input type="text" id="so-number" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="customer-name" class="form-label">Customer Name</label>
                        <input type="text" id="customer-name" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="address" class="form-label">Address</label>
                        <textarea id="address" rows="3" class="form-textarea"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="customer-email" class="form-label">Primary Email</label>
                        <input type="email" id="customer-email" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="customer-phone" class="form-label">Primary Phone</label>
                        <input type="tel" id="customer-phone" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="service-speed" class="form-label">Service Speed</label>
                        <select id="service-speed" class="form-select">
                            <option>200 Mbps</option>
                            <option>500 Mbps</option>
                            <option>1 Gbps</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full-width">
                        <i data-lucide="plus-circle" class="btn-icon"></i>
                        Add Customer
                    </button>
                </form>
            </div>

            <div class="card">
                <h2 class="card-title">Customer List</h2>
                <div class="form-group">
                    <label for="search-bar" class="form-label">Search</label>
                    <input type="text" id="search-bar" class="form-input" placeholder="Search by name or S.O. ...">
                </div>
                <div id="customer-list-container" class="customer-list-container">
                    <p id="list-loading" class="text-gray-500">Loading customers...</p>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">Customer Details</h2>
                <div id="details-container" data-id="">
                    <div id="loading-overlay">
                        <div id="loading-spinner"></div>
                    </div>

                    <form id="details-form" class="card-content">
                        
                        <div class="form-group">
                            <label class="form-label" for="details-so-number">Service Order #</label>
                            <div class="field-wrapper">
                                <span id="details-so-number" class="static-field"></span>
                                <button type="button" class="copy-btn" data-target="details-so-number">
                                    <img src="copy.png" alt="Copy" class="icon-copy" />
                                    <img src="check.png" alt="Copied" class="icon-check" />
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="details-address">Address</label>
                            <div class="field-wrapper">
                                <span id="details-address" class="static-field"></span>
                                <button type="button" class="copy-btn" data-target="details-address">
                                    <img src="copy.png" alt="Copy" class="icon-copy" />
                                    <img src="check.png" alt="Copied" class="icon-check" />
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="details-speed">Service Speed</label>
                            <div class="field-wrapper">
                                <span id="details-speed" class="static-field"></span>
                                <button type="button" class="copy-btn" data-target="details-speed">
                                    <img src="copy.png" alt="Copy" class="icon-copy" />
                                    <img src="check.png" alt="Copied" class="icon-check" />
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="details-email">Primary Email</label>
                            <div class="field-wrapper">
                                <span id="details-email" class="static-field"></span>
                                <button type="button" class="copy-btn" data-target="details-email">
                                    <img src="copy.png" alt="Copy" class="icon-copy" />
                                    <img src="check.png" alt="Copied" class="icon-check" />
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="details-phone">Primary Phone</label>
                            <div class="field-wrapper">
                                <span id="details-phone" class="static-field"></span>
                                <button type="button" class="copy-btn" data-target="details-phone">
                                    <img src="copy.png" alt="Copy" class="icon-copy" />
                                    <img src="check.png" alt="Copied" class="icon-check" />
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="details-status" class="form-label">Status</label>
                            <select id="details-status" class="form-select">
                                <option>New Order</option>
                                <option>Site Survey</option>
                                <option>Install Scheduled</option>
                                <option>Completed</option>
                                <option>On Hold</option>
                            </select>
                        </div>

                        <fieldset class="checklist-group">
                            <legend class="checklist-title">Pre-Install Checklist</legend>
                            <div class="checklist-content">
                                <div class="checklist-item">
                                    <div class="checklist-item-box">
                                        <input id="check-welcome-email" name="check-welcome-email" type="checkbox" class="form-checkbox">
                                    </div>
                                    <div class="checklist-item-label">
                                        <label for="check-welcome-email">Welcome Email Sent</label>
                                    </div>
                                    <button type="button" id="send-welcome-email-btn">
                                        Send Now
                                    </button>
                                </div>
                                <div class="checklist-item">
                                    <div class="checklist-item-box">
                                        <input id="check-site-survey" name="check-site-survey" type="checkbox" class="form-checkbox">
                                    </div>
                                    <div class="checklist-item-label">
                                        <label for="check-site-survey">Added to Site Survey List</label>
                                    </div>
                                </div>
                                <div class="checklist-item">
                                    <div class="checklist-item-box">
                                        <input id="check-fiber-list" name="check-fiber-list" type="checkbox" class="form-checkbox">
                                    </div>
                                    <div class="checklist-item-label">
                                        <label for="check-fiber-list">Added to Residential Fiber List</label>
                                    </div>
                                </div>
                                <div class="checklist-item">
                                    <div class="checklist-item-box">
                                        <input id="check-repair-shoppr" name="check-repair-shoppr" type="checkbox" class="form-checkbox">
                                    </div>
                                    <div class="checklist-item-label">
                                        <label for="check-repair-shoppr">Added to Repair Shoppr</label>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <fieldset class="checklist-group">
                            <legend class="checklist-title">Install Details</legend>
                            <div class="checklist-content">
                                <div class="form-group">
                                    <label for="install-date" class="form-label">Install Date</label>
                                    <div class="field-wrapper">
                                        <input type="date" id="install-date" class="form-input" style="padding-right: 2.5rem;">
                                        <button type="button" class="copy-btn" data-target="install-date">
                                            <img src="copy.png" alt="Copy" class="icon-copy" />
                                            <img src="check.png" alt="Copied" class="icon-check" />
                                        </button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="eero-info" class="form-label">Eero Insight Info</label>
                                    <div class="field-wrapper">
                                        <textarea id="eero-info" rows="2" class="form-textarea" style="padding-right: 2.5rem;"></textarea>
                                        <button type="button" class="copy-btn" data-target="eero-info">
                                            <img src="copy.png" alt="Copy" class="icon-copy" />
                                            <img src="check.png" alt="Copied" class="icon-check" />
                                        </button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="nid-light" class="form-label">Light Reading @ NID</label>
                                    <div class="field-wrapper">
                                        <input type="text" id="nid-light" class="form-input" style="padding-right: 2.5rem;">
                                        <button type="button" class="copy-btn" data-target="nid-light">
                                            <img src="copy.png" alt="Copy" class="icon-copy" />
                                            <img src="check.png" alt="Copied" class="icon-check" />
                                        </button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="extra-equip" class="form-label">Additional Equipment</label>
                                    <div class="field-wrapper">
                                        <textarea id="extra-equip" rows="2" class="form-textarea" style="padding-right: 2.5rem;"></textarea>
                                        <button type="button" class="copy-btn" data-target="extra-equip">
                                            <img src="copy.png" alt="Copy" class="icon-copy" />
                                            <img src="check.png" alt="Copied" class="icon-check" />
                                        </button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="general-notes" class="form-label">General Notes</label>
                                    <div class="field-wrapper">
                                        <textarea id="general-notes" rows="3" class="form-textarea" style="padding-right: 2.5rem;"></textarea>
                                        <button type="button" class="copy-btn" data-target="general-notes">
                                            <img src="copy.png" alt="Copy" class="icon-copy" />
                                            <img src="check.png" alt="Copied" class="icon-check" />
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <fieldset class="checklist-group">
                            <legend class="checklist-title">Post-Install Checklist</legend>
                            <div class="checklist-content">
                                <div class="checklist-item">
                                    <div class="checklist-item-box">
                                        <input id="post-check-fiber" name="post-check-fiber" type="checkbox" class="form-checkbox">
                                    </div>
                                    <div class="checklist-item-label">
                                        <label for="post-check-fiber">Removed from Residential Fiber List</label>
                                    </div>
                                </div>
                                <div class="checklist-item">
                                    <div class="checklist-item-box">
                                        <input id="post-check-survey" name="post-check-survey" type="checkbox" class="form-checkbox">
                                    </div>
                                    <div class="checklist-item-label">
                                        <label for="post-check-survey">Removed from Site Survey List</label>
                                    </div>
                                </div>
                                <div class="checklist-item">
                                    <div class="checklist-item-box">
                                        <input id="post-check-repair" name="post-check-repair" type="checkbox" class="form-checkbox">
                                    </div>
                                    <div class="checklist-item-label">
                                        <label for="post-check-repair">Updated Repair Shoppr</label>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <div class="action-buttons">
                            <button type="button" id="update-customer-btn" class="btn btn-primary">
                                <i data-lucide="save" class="btn-icon"></i>
                                Save Changes
                            </button>
                            <button type="button" id="copy-billing-btn" class="btn btn-secondary">
                                <i data-lucide="clipboard-list" class="btn-icon"></i>
                                Copy Info for Billing
                            </button>
                            <button type="button" id="delete-customer-btn" class="btn btn-danger">
                                <i data-lucide="trash-2" class="btn-icon"></i>
                                Delete Customer
                            </button>
                        </div>

                    </form>
                </div>

                <div id="details-placeholder" class="details-placeholder">
                    <i data-lucide="mouse-pointer-square" style="width: 3rem; height: 3rem; color: #9ca3af; margin: 0 auto;"></i>
                    <p style="margin-top: 0.5rem;">Select a customer from the list to view their details.</p>
                </div>
            </div>
        </div>
    </div>
    
    <div id="toast-notification"></div>

    <script type="module" src="firebase.js"></script>
    
    <script type="module" src="app.js"></script>

    <script>
        lucide.createIcons();
    </script>
</body>
</html>